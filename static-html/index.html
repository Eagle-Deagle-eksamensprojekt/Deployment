<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grøn og Olsen</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1 { color: #333; }
        .endpoint { margin-bottom: 20px; padding: 10px; border: 1px solid #ccc; border-radius: 5px; }
        textarea { width: 100%; height: 80px; }
        input, button { padding: 10px; margin: 5px 0; }
    </style>
</head>
<body>
    <h1>API Test Interface</h1>

    <div class="endpoint">
        <h2>Login</h2>
        <form onsubmit="testEndpoint(event, '/auth/login')">
            <textarea name="body">{
    "userEmail": "test1@example.org",
    "password": "5"
}</textarea><br>
            <button type="submit">Test Endpoint</button>
        </form>
    </div>

    <div id="response-container" style="border: 1px solid #ccc; padding: 10px; margin-top: 20px; max-height: 300px; overflow-y: auto; background: #f9f9f9;">
        <h3>Response:</h3>
        <pre id="response-content" style="white-space: pre-wrap;"></pre>
    </div>

    <div class="endpoint">
        <h2>Get All Users</h2>
        <form onsubmit="testEndpoint(event, '/user/all')">
            <button type="submit">Test Endpoint</button>
        </form>
    </div>

    <div id="response-container" style="border: 1px solid #ccc; padding: 10px; margin-top: 20px; max-height: 300px; overflow-y: auto; background: #f9f9f9;">
        <h3>Response:</h3>
        <pre id="response-content" style="white-space: pre-wrap;"></pre>
    </div>

    <div class="endpoint">
        <h2>Create User</h2>
        <form onsubmit="testEndpoint(event, '/user')">
            <textarea name="body">
                {
                    "address": "Kjærslund",
                    "email": "test1@example.org",
                    "firstname": "Mikkel",
                    "isAdmin": true,
                    "lastname": "Hansen",
                    "password": "5",
                    "phoneNumber": "88888888",
                    "salt": ""
            }
            </textarea>
            <button type="submit">Test Endpoint</button>
        </form>
    </div>

    <div id="response-container" style="border: 1px solid #ccc; padding: 10px; margin-top: 20px; max-height: 300px; overflow-y: auto; background: #f9f9f9;">
        <h3>Response:</h3>
        <pre id="response-content" style="white-space: pre-wrap;"></pre>
    </div>

    <div class="endpoint">
        <h2>Create Item</h2>
        <form onsubmit="testEndpoint(event, '/item')">
            <textarea name="body">{
                "description": "Stol fra Albanien",
                "endAuctionDateTime": "2024-12-13T12:14:31.804+00:00",
                "itemId": "Item_2",
                "ownerId": "67572606df598934035057ef",
                "startAuctionDateTime": "2024-12-09T18:14:31.804+00:00",
                "startPrice": 70,
                "title": "Albania Stol",
                "vurdertPrice": 700
            }</textarea><br>
            <button type="submit">Test Endpoint</button>
        </form>
    </div>

    <div id="response-container" style="border: 1px solid #ccc; padding: 10px; margin-top: 20px; max-height: 300px; overflow-y: auto; background: #f9f9f9;">
        <h3>Response:</h3>
        <pre id="response-content" style="white-space: pre-wrap;"></pre>
    </div>

    <div class="endpoint">
        <h2>Get All Items</h2>
        <form onsubmit="testEndpoint(event, '/item/all')">
            <button type="submit">Test Endpoint</button>
        </form>
    </div>

    <div id="response-container" style="border: 1px solid #ccc; padding: 10px; margin-top: 20px; max-height: 300px; overflow-y: auto; background: #f9f9f9;">
        <h3>Response:</h3>
        <pre id="response-content" style="white-space: pre-wrap;"></pre>
    </div>

    <div class="endpoint">
        <h2>Get All Auctions</h2>
        <form onsubmit="testEndpoint(event, '/auction/all')">
            <button type="submit">Test Endpoint</button>
        </form>
    </div>

    <div id="response-container" style="border: 1px solid #ccc; padding: 10px; margin-top: 20px; max-height: 300px; overflow-y: auto; background: #f9f9f9;">
        <h3>Response:</h3>
        <pre id="response-content" style="white-space: pre-wrap;"></pre>
    </div>

    <div class="endpoint">
        <h2>Fetch and Save Auctionable Items</h2>
        <form onsubmit="testEndpoint(event, '/auction/fetch-and-save-auctionable')">
            <button type="submit">Test Endpoint</button>
        </form>
    </div>

    <div id="response-container" style="border: 1px solid #ccc; padding: 10px; margin-top: 20px; max-height: 300px; overflow-y: auto; background: #f9f9f9;">
        <h3>Response:</h3>
        <pre id="response-content" style="white-space: pre-wrap;"></pre>
    </div>

    <div class="endpoint">
        <h2>Start Listener</h2>
        <form onsubmit="testEndpoint(event, '/bid/start-listener')">
            <textarea></textarea>
            <button type="submit">Test Endpoint</button>
        </form>
    </div>

    <div id="response-container" style="border: 1px solid #ccc; padding: 10px; margin-top: 20px; max-height: 300px; overflow-y: auto; background: #f9f9f9;">
        <h3>Response:</h3>
        <pre id="response-content" style="white-space: pre-wrap;"></pre>
    </div>

    <div class="endpoint">
        <h2>Place Bid</h2>
        <form onsubmit="testEndpoint(event, '/ingress')">
            <textarea name="body">{
            "Amount": 50,
            "BidTime": "2024-12-11T21:44:55.787Z",
            "ItemId": "6756c885725834c03d2e1bde",
            "UserId": "123"
            }</textarea><br>
            <button type="submit">Test Endpoint</button>
        </form>
    </div>

    <div id="response-container" style="border: 1px solid #ccc; padding: 10px; margin-top: 20px; max-height: 300px; overflow-y: auto; background: #f9f9f9;">
        <h3>Response:</h3>
        <pre id="response-content" style="white-space: pre-wrap;"></pre>
    </div>
    

    <script>
        async function testEndpoint(event, endpoint) {
            event.preventDefault();
            const form = event.target;
            const method = form.querySelector("textarea") ? "POST" : "GET";
            const body = form.querySelector("textarea")?.value;
    
            try {
                const response = await fetch(`http://52.156.215.202:4000${endpoint}`, {
                    method,
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: body || undefined
                });
    
                const result = await response.json();
    
                // Vis resultatet i #response-container
                const responseContainer = document.getElementById("response-container");
                const responseContent = document.getElementById("response-content");
    
                responseContent.textContent = JSON.stringify(result, null, 2); // Formater JSON med 2 mellemrum
                responseContainer.style.display = "block"; // Sørg for at det vises
            } catch (error) {
                // Håndter fejl og vis en besked
                alert(`Error: ${error.message}`);
            }
        }
    </script>

    <style>
        #response-container {
            border: 1px solid #ccc;
            padding: 15px;
            margin-top: 20px;
            max-height: 400px;
            overflow-y: auto;
            background-color: #f9f9f9;
            font-family: monospace;
            display: none; /* Skjul som standard */
        }
        #response-content {
            white-space: pre-wrap;
            word-wrap: break-word;
        }
    </style>

</body>
</html>
